{"ast":null,"code":"var _jsxFileName = \"/home/tracey/Desktop/BootCamp/Week7/Day4/day4/frontend/src/components/FeedLikeButton/index.js\";\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport './index.css';\nimport LikePostFunction from '../../store/actions/LikePostAction';\n\nfunction FeedLikeButton(props) {\n  const [liked_count, setLikes] = useState(props.post.liked_count);\n  const [logged_in_user_liked, setUserLiked] = useState(props.post.logged_in_user_liked);\n\n  const LikePostHandler = e => {\n    const post_id = e.target.id;\n    console.log('e', post_id);\n    console.log('like props', props);\n    const user_id = props.UserReducer.user.id;\n    const post_likes = props.post.likes;\n    const logged_in_likes = post_likes.includes(user_id);\n    console.log('logged like?', logged_in_likes);\n    const new_post = props.post;\n    logged_in_likes ? setUserLiked(true) : setUserLiked(false);\n    props.dispatch(LikePostFunction(props, post_id, new_post));\n\n    if (logged_in_user_liked === true) {\n      setLikes(liked_count - 1);\n\n      if (props.FeedReducer.currentFeedState === \"POST_LIKE\") {\n        props.updateLikedPosts(post_id);\n        props.post.liked_count = props.post.liked_count - 1;\n      }\n\n      setUserLiked(false);\n      props.post.logged_in_user_liked = false;\n      props.post.likes.delete(user_id);\n      console.log('new props', props);\n    } else {\n      setLikes(liked_count + 1);\n      props.post.liked_count = props.post.liked_count + 1;\n      setUserLiked(true);\n    }\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"post_footer_left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: require('../../assets/images/like.png'),\n    alt: \"like\",\n    id: props.post.id,\n    onClick: e => LikePostHandler(e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Like\"), React.createElement(\"img\", {\n    src: require('../../assets/images/share.png'),\n    alt: \"share\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, \"Share\")), React.createElement(\"div\", {\n    className: \"post_footer_right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, props.post.liked_count, \" \", props.post.liked_count === 1 ? \"like\" : \"likes\")));\n}\n\nconst mapStateToProps = state => {\n  return { ...state,\n    logged_in_user_liked,\n    liked_count\n  };\n};\n\nexport default connect(mapStateToProps)(FeedLikeButton);","map":{"version":3,"sources":["/home/tracey/Desktop/BootCamp/Week7/Day4/day4/frontend/src/components/FeedLikeButton/index.js"],"names":["React","useState","connect","LikePostFunction","FeedLikeButton","props","liked_count","setLikes","post","logged_in_user_liked","setUserLiked","LikePostHandler","e","post_id","target","id","console","log","user_id","UserReducer","user","post_likes","likes","logged_in_likes","includes","new_post","dispatch","FeedReducer","currentFeedState","updateLikedPosts","delete","require","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React,{useState}  from 'react';\nimport {connect} from 'react-redux';\nimport './index.css';\nimport LikePostFunction from '../../store/actions/LikePostAction';\n\nfunction FeedLikeButton(props) {    \n    const [liked_count, setLikes] = useState(props.post.liked_count);\n    const [logged_in_user_liked, setUserLiked] = useState(props.post.logged_in_user_liked);\n\n    const LikePostHandler = (e) => {        \n        const post_id = e.target.id;\n\n        console.log('e',post_id);\n        console.log('like props',props);\n\n        const user_id = props.UserReducer.user.id;\n        const post_likes = props.post.likes;\n        const logged_in_likes = post_likes.includes(user_id);\n\n        console.log('logged like?',logged_in_likes);\n        const new_post = props.post;\n        logged_in_likes ? setUserLiked(true) : setUserLiked(false)\n\n        props.dispatch(LikePostFunction(props,post_id,new_post));\n\n        if (logged_in_user_liked === true) {\n            setLikes(liked_count - 1);\n            if (props.FeedReducer.currentFeedState === \"POST_LIKE\") {\n            props.updateLikedPosts(post_id);\n            props.post.liked_count = props.post.liked_count- 1;\n            }\n            setUserLiked(false);\n            props.post.logged_in_user_liked = false\n            props.post.likes.delete(user_id)\n            console.log('new props', props)\n\n        } else {\n            setLikes(liked_count + 1);\n            props.post.liked_count = props.post.liked_count + 1;\n                setUserLiked(true);\n        }\n        } \n       return(\n           <>\n        <div className=\"post_footer_left\">\n            <img src={require('../../assets/images/like.png')} alt=\"like\" id={props.post.id} onClick={(e) =>LikePostHandler(e)}/>\n            <p>Like</p>\n            <img src={require('../../assets/images/share.png')} alt=\"share\"/>   \n            <p>Share</p>\n        </div>\n        <div className=\"post_footer_right\">\n            <p>{props.post.liked_count} {props.post.liked_count ===1 ? \"like\" : \"likes\"}</p>\n         </div>\n         </>   \n            )\n    }\n    \nconst mapStateToProps = state => {\n    return {\n        ...state,\n        logged_in_user_liked,\n        liked_count,\n      };\n    };   \n\nexport default connect(mapStateToProps)(FeedLikeButton);       "]},"metadata":{},"sourceType":"module"}