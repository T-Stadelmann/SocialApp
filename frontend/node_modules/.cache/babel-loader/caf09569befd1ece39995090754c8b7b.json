{"ast":null,"code":"import { verifytoken } from \"../../types\";\nexport const verifyTokenAction = content => ({\n  type: verifytoken,\n  payload: content\n});\nconst URL = `https://motion.propulsion-home.ch/backend/api/auth/token/verify/`;\n\nfunction verifyTokenFunction(props) {\n  const token = props.SignInReducer.token;\n  const headers = new Headers({\n    'Content-Type': 'application/json',\n    'Authorization': `Bearer ${token}`\n  });\n  const config = {\n    method: 'POST',\n    headers,\n    body: JSON.stringify({\n      \"token\": token\n    })\n  };\n  fetch(URL, config).then(res => res.json()).then(data => {\n    const content = data;\n\n    if (content.code === \"token_not_valid\") {\n      localStorage.removeItem('token');\n      props.history.push('/signin');\n    } else {\n      props.history.push('/');\n    }\n  });\n}\n\nexport default verifyTokenFunction;","map":{"version":3,"sources":["/home/tracey/Desktop/BootCamp/Week7/Day4/day4/frontend/src/store/actions/tokenVerify/index.js"],"names":["verifytoken","verifyTokenAction","content","type","payload","URL","verifyTokenFunction","props","token","SignInReducer","headers","Headers","config","method","body","JSON","stringify","fetch","then","res","json","data","code","localStorage","removeItem","history","push"],"mappings":"AAAA,SAAQA,WAAR,QAA0B,aAA1B;AAEA,OAAO,MAAMC,iBAAiB,GAAGC,OAAO,KAAK;AACzCC,EAAAA,IAAI,EAAEH,WADmC;AAEzCI,EAAAA,OAAO,EAAEF;AAFgC,CAAL,CAAjC;AAMP,MAAMG,GAAG,GAAI,kEAAb;;AAGA,SAASC,mBAAT,CAA6BC,KAA7B,EAAmC;AAC/B,QAAMC,KAAK,GAAGD,KAAK,CAACE,aAAN,CAAoBD,KAAlC;AACA,QAAME,OAAO,GAAG,IAAIC,OAAJ,CAAY;AACxB,oBAAgB,kBADQ;AAExB,qBAAkB,UAASH,KAAM;AAFT,GAAZ,CAAhB;AAIA,QAAMI,MAAM,GAAG;AACXC,IAAAA,MAAM,EAAE,MADG;AAEXH,IAAAA,OAFW;AAGXI,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAC,eAASR;AAAV,KAAf;AAHK,GAAf;AAOAS,EAAAA,KAAK,CAACZ,GAAD,EAAMO,MAAN,CAAL,CAAoBM,IAApB,CAAyBC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAAhC,EACCF,IADD,CACMG,IAAI,IAAI;AACV,UAAMnB,OAAO,GAAGmB,IAAhB;;AACA,QAAInB,OAAO,CAACoB,IAAR,KAAiB,iBAArB,EAAwC;AACpCC,MAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAjB,MAAAA,KAAK,CAACkB,OAAN,CAAcC,IAAd,CAAmB,SAAnB;AACH,KAHD,MAGO;AACHnB,MAAAA,KAAK,CAACkB,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACH;AACJ,GATD;AAUH;;AACD,eAAepB,mBAAf","sourcesContent":["import {verifytoken} from \"../../types\";\n\nexport const verifyTokenAction = content => ({\n    type: verifytoken,\n    payload: content\n});\n\n\nconst URL = `https://motion.propulsion-home.ch/backend/api/auth/token/verify/`;\n\n\nfunction verifyTokenFunction(props){\n    const token = props.SignInReducer.token\n    const headers = new Headers({\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n    })\n    const config = {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\"token\": token})\n\n    };\n \n    fetch(URL, config) .then(res => res.json())\n    .then(data => {\n        const content = data;\n        if (content.code === \"token_not_valid\") {\n            localStorage.removeItem('token');\n            props.history.push('/signin');\n        } else {\n            props.history.push('/');\n        }\n    })\n}\nexport default verifyTokenFunction;"]},"metadata":{},"sourceType":"module"}