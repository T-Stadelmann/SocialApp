{"ast":null,"code":"import _objectSpread from\"/home/tracey/Desktop/BootCamp/Week7/Day4/day4/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/tracey/Desktop/BootCamp/Week7/Day4/day4/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'./index.css';import{connect}from'react-redux';import TimeAgo from'react-timeago';import englishStrings from'react-timeago/lib/language-strings/en';import buildFormatter from'react-timeago/lib/formatters/buildFormatter';import LikePostFunction from'../../store/actions/LikePostAction';import FeedPostMenu from'../FeedPostMenu';import editPostMenuFunction from'../../store/actions/editPostMenuAction';import sendEditPostFunction from'../../store/actions/sendEditPostAction';import FeedDeletePost from'../FeedDeletePost';var formatter=buildFormatter(englishStrings);function FeedFullPost(props){var _useState=useState(props.FeedReducer.postFullPopUp.liked_count),_useState2=_slicedToArray(_useState,2),liked_count=_useState2[0],setLikes=_useState2[1];var _useState3=useState(props.FeedReducer.postFullPopUp.logged_in_user_liked),_useState4=_slicedToArray(_useState3,2),logged_in_user_liked=_useState4[0],setUserLiked=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editPost=_useState6[0],setEditPost=_useState6[1];var _useState7=useState(props.FeedReducer.postFullPopUp.text_content),_useState8=_slicedToArray(_useState7,2),text_content=_useState8[0],setContent=_useState8[1];var LikePostHandler=function LikePostHandler(e){var post_id=e.target.id;props.dispatch(LikePostFunction(props,post_id));if(logged_in_user_liked===true){setLikes(liked_count-1);setUserLiked(!logged_in_user_liked);}else{setLikes(liked_count+1);setUserLiked(!logged_in_user_liked);}};var editPostHandler=function editPostHandler(){setEditPost(!editPost);props.dispatch(editPostMenuFunction(props));};var sendEditPostHandler=function sendEditPostHandler(e,props,text_content){e.preventDefault();var data={images:[],text_content:text_content};var post_id=props.FeedReducer.postFullPopUpID;;props.dispatch(sendEditPostFunction(post_id,props,data));};var post_id=props.FeedReducer.postFullPopUpID;var postArr=props.PostsReducer.postitems;var current_user_id=props.UserReducer.user.id.toString();var fullPost=postArr.filter(function(post){return post.id===post_id;});if(fullPost===undefined){return React.createElement(\"div\",null,\"Loading ...\");}else{console.log('feef',props);var author_id=fullPost[0].author.id.toString();var is_author=author_id===current_user_id?true:false;return React.createElement(\"div\",{className:\"pop_up_full_post\"},React.createElement(\"div\",{className:\"pop_up_full_post_close\"},React.createElement(\"button\",{onClick:function onClick(e){return props.closeFullPostHandler(e,props);}},\"X\"),React.createElement(\"div\",{className:\"pop_up_full_inner\"},props.FeedReducer.deletePostMenu?React.createElement(FeedDeletePost,{props:props}):React.createElement(React.Fragment,null,fullPost[0].images[0]?React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"pop_up_full_container\"},React.createElement(\"div\",{className:\"pop_up_full_left\"},React.createElement(\"img\",{src:fullPost[0].images[0].image,alt:fullPost[0].images[0].image})),React.createElement(\"div\",{className:\"pop_up_full_right\"},React.createElement(\"div\",{className:\"pop_up_full_header\"},React.createElement(\"div\",{className:\"pop_up_full_header_left\"},fullPost[0].author.avatar?React.createElement(\"img\",{src:fullPost[0].user.avatar,alt:fullPost[0].user.avatar}):React.createElement(\"img\",{src:require('../../assets/images/blank_avatar.png'),alt:\"avatar\"}),React.createElement(\"div\",{className:\"post_pop_up_name\"},fullPost[0].author.first_name,\" \",fullPost[0].author.last_name,React.createElement(TimeAgo,{date:fullPost[0].posted_date,formatter:formatter}))),React.createElement(\"div\",{className:\"post_header_dots\"},is_author===true?React.createElement(FeedPostMenu,{props:props}):React.createElement(\"img\",{src:require('../../assets/images/dots.png'),alt:\"three dots\",id:\"dots\"}))),React.createElement(\"div\",{className:\"pop_up_post_full_content\"},props.FeedReducer.editPostMenu?React.createElement(React.Fragment,null,React.createElement(\"textarea\",{name:\"new_post\",type:\"text\",defaultValue:text_content,onChange:function onChange(e){setContent(e.currentTarget.value);}}),React.createElement(\"div\",{className:\"post_edit_buttons\"},React.createElement(\"button\",{type:\"submit\",id:\"submit_edit_post\",onClick:function onClick(e){sendEditPostHandler(e,props,text_content);editPostHandler();}},\"Submit\"),React.createElement(\"button\",{type:\"submit\",id:\"cancel_edit_post\",onClick:function onClick(){return editPostHandler();}},\"Cancel\"))):text_content),React.createElement(\"div\",{className:\"pop_up_full_footer_top\"},React.createElement(\"p\",null,liked_count,\" \",liked_count===1?\"like\":\"likes\")),React.createElement(\"div\",{className:\"pop_up_full_footer_bottom\"},React.createElement(\"img\",{src:require('../../assets/images/like.png'),alt:\"like\",id:fullPost[0].id,onClick:function onClick(e){return LikePostHandler(e);}}),React.createElement(\"p\",null,\"Like\"),React.createElement(\"img\",{src:require('../../assets/images/share.png'),alt:\"share\"}),React.createElement(\"p\",null,\"Share\"))))):React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"pop_up_full_container\"},React.createElement(\"div\",{className:\"hide_me\"}),React.createElement(\"div\",{className:\"pop_up_full_right_no_img\"},React.createElement(\"div\",{className:\"pop_up_full_header\"},React.createElement(\"div\",{className:\"pop_up_full_header_left\"},fullPost[0].author.avatar?React.createElement(\"img\",{src:fullPost[0].author.avatar,alt:fullPost[0].author.avatar}):React.createElement(\"img\",{src:require('../../assets/images/blank_avatar.png'),alt:\"avatar\"}),React.createElement(\"div\",{className:\"post_pop_up_name\"},fullPost[0].author.first_name,\" \",fullPost[0].author.last_name,React.createElement(TimeAgo,{date:fullPost[0].posted_date,formatter:formatter}))),React.createElement(\"div\",{className:\"post_header_dots\"},fullPost[0].is_from_logged_in_user?React.createElement(FeedPostMenu,{props:props}):React.createElement(\"img\",{src:require('../../assets/images/send_button.png'),alt:\"three dots\",id:\"dots\"}))),React.createElement(\"div\",{className:\"pop_up_post_full_content\"},props.FeedReducer.editPostMenu?React.createElement(React.Fragment,null,React.createElement(\"textarea\",{name:\"new_post\",type:\"text\",defaultValue:text_content,onChange:function onChange(e){setContent(e.currentTarget.value);}}),React.createElement(\"div\",{className:\"post_edit_buttons\"},React.createElement(\"button\",{type:\"submit\",id:\"submit_edit_post\",onClick:function onClick(e){sendEditPostHandler(e,props,text_content);editPostHandler();}},\"Submit\"),React.createElement(\"button\",{type:\"submit\",id:\"cancel_edit_post\",onClick:function onClick(){return editPostHandler();}},\"Cancel\"))):text_content),React.createElement(\"div\",{className:\"pop_up_full_footer_top\"},React.createElement(\"p\",null,liked_count,\" \",liked_count===1?\"like\":\"likes\")),React.createElement(\"div\",{className:\"pop_up_full_footer_bottom\"},React.createElement(\"img\",{src:require('../../assets/images/like.png'),alt:\"like\",id:fullPost[0].id,onClick:function onClick(e){return LikePostHandler(e);}}),React.createElement(\"p\",null,\"Like\"),React.createElement(\"img\",{src:require('../../assets/images/share.png'),alt:\"share\"}),React.createElement(\"p\",null,\"Share\")))))))));}}var mapStateToProps=function mapStateToProps(state){return _objectSpread({},state,{content:state.content});};export default connect(mapStateToProps)(FeedFullPost);","map":{"version":3,"sources":["/home/tracey/Desktop/BootCamp/Week7/Day4/day4/frontend/src/components/FeedFullPost/index.js"],"names":["React","useState","connect","TimeAgo","englishStrings","buildFormatter","LikePostFunction","FeedPostMenu","editPostMenuFunction","sendEditPostFunction","FeedDeletePost","formatter","FeedFullPost","props","FeedReducer","postFullPopUp","liked_count","setLikes","logged_in_user_liked","setUserLiked","editPost","setEditPost","text_content","setContent","LikePostHandler","e","post_id","target","id","dispatch","editPostHandler","sendEditPostHandler","preventDefault","data","images","postFullPopUpID","postArr","PostsReducer","postitems","current_user_id","UserReducer","user","toString","fullPost","filter","post","undefined","console","log","author_id","author","is_author","closeFullPostHandler","deletePostMenu","image","avatar","require","first_name","last_name","posted_date","editPostMenu","currentTarget","value","is_from_logged_in_user","mapStateToProps","state","content"],"mappings":"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","sourcesContent":["import React,{useState} from 'react';\nimport './index.css';\nimport {connect} from 'react-redux';\nimport TimeAgo from 'react-timeago';\nimport englishStrings from 'react-timeago/lib/language-strings/en';\nimport buildFormatter from 'react-timeago/lib/formatters/buildFormatter';\nimport LikePostFunction from '../../store/actions/LikePostAction';\nimport FeedPostMenu from '../FeedPostMenu';\nimport editPostMenuFunction from '../../store/actions/editPostMenuAction';\nimport sendEditPostFunction from '../../store/actions/sendEditPostAction';\nimport FeedDeletePost from '../FeedDeletePost';\n\nconst formatter = buildFormatter(englishStrings)\n\nfunction FeedFullPost(props) {  \n    const [liked_count, setLikes] = useState(props.FeedReducer.postFullPopUp.liked_count);\n    const [logged_in_user_liked, setUserLiked] = useState(props.FeedReducer.postFullPopUp.logged_in_user_liked);\n    const [editPost,setEditPost] = useState(false);\n    const [text_content, setContent] = useState(props.FeedReducer.postFullPopUp.text_content);\n\n    const LikePostHandler = (e) => {       \n        const post_id = e.target.id;\n        props.dispatch(LikePostFunction(props,post_id));\n        if (logged_in_user_liked === true) {\n            setLikes(liked_count - 1);\n            setUserLiked(!logged_in_user_liked);\n        } else {\n            setLikes(liked_count + 1);\n            setUserLiked(!logged_in_user_liked);\n        }\n        } \n\n    const editPostHandler = () => { \n        setEditPost(!editPost);\n        props.dispatch(editPostMenuFunction(props));\n        }       \n    \n    const sendEditPostHandler = (e,props,text_content) => {\n         e.preventDefault();\n         const data = {\n            images: [],\n            text_content: text_content,\n\n        }\n        const post_id = props.FeedReducer.postFullPopUpID;;\n        props.dispatch(sendEditPostFunction(post_id,props,data));\n          }  \n\n     \n    const post_id = props.FeedReducer.postFullPopUpID;\n    const postArr = props.PostsReducer.postitems;\n    const current_user_id = props.UserReducer.user.id.toString()\n    const fullPost = postArr.filter(function (post){\n    return post.id === post_id\n                })\n        if(fullPost === undefined){\n            return (\n                <div>Loading ...</div>\n                    )\n        } else {\n            console.log('feef', props)\n            let author_id = fullPost[0].author.id.toString();\n            const is_author = author_id === current_user_id ? true : false\n             return (\n                <div className=\"pop_up_full_post\">\n                    <div className=\"pop_up_full_post_close\">\n                        <button onClick={(e) => props.closeFullPostHandler(e,props)}>X</button>                         \n                        <div className=\"pop_up_full_inner\">\n                        { props.FeedReducer.deletePostMenu ? \n                              <FeedDeletePost props={props}/> : \n                            <>    \n                            {fullPost[0].images[0] ?  \n                                <>\n                                <div className=\"pop_up_full_container\">\n                                   <div className=\"pop_up_full_left\">\n                                    <img src={fullPost[0].images[0].image} alt={fullPost[0].images[0].image}/>\n                                    </div> \n                                    <div className=\"pop_up_full_right\">\n                                        <div className=\"pop_up_full_header\">\n                                            <div className=\"pop_up_full_header_left\">\n                                                {fullPost[0].author.avatar ? <img src={fullPost[0].user.avatar} alt={fullPost[0].user.avatar}/> :<img src={require('../../assets/images/blank_avatar.png')} alt={\"avatar\"}/>}\n                                                <div className=\"post_pop_up_name\"> \n                                                    {fullPost[0].author.first_name} {fullPost[0].author.last_name}\n                                                    <TimeAgo date={fullPost[0].posted_date} formatter={formatter} />\n                                                </div>\n                                            </div>\n                                            <div className=\"post_header_dots\">  \n                                            { is_author === true ?\n                                                <FeedPostMenu props={props}\n                                                />\n                                                :\n                                                <img src={require('../../assets/images/dots.png')} alt=\"three dots\" id=\"dots\" />\n                                            }\n                                            </div>\n                                    </div>\n                                    <div className=\"pop_up_post_full_content\">\n                                    { props.FeedReducer.editPostMenu ? \n                                      <>\n                                      <textarea name='new_post' type='text' defaultValue={text_content} onChange={(e) => {setContent(e.currentTarget.value)}}></textarea>\n                                        <div className=\"post_edit_buttons\">\n                                        <button type=\"submit\" id=\"submit_edit_post\" onClick={(e) => {sendEditPostHandler(e,props,text_content);editPostHandler()}}>Submit</button>\n                                        <button type=\"submit\" id=\"cancel_edit_post\" onClick={() => editPostHandler()}>Cancel</button>\n                                        </div>\n                                        </>\n                                        : text_content}\n                                        </div>\n                                        <div className=\"pop_up_full_footer_top\">\n                                            <p>{liked_count} {liked_count ===1 ? \"like\" : \"likes\"}</p>\n                                        </div>\n                                        <div className=\"pop_up_full_footer_bottom\">\n                                            <img src={require('../../assets/images/like.png')} alt=\"like\" id={fullPost[0].id} onClick={(e)=>LikePostHandler(e)}/>\n                                            <p>Like</p>\n                                            <img src={require('../../assets/images/share.png')} alt=\"share\"/>   \n                                            <p>Share</p>\n                                        </div>         \n                                    </div>\n                                    </div>\n                                    </>\n                                    :\n                                    <>\n                                        <div className=\"pop_up_full_container\">\n                                            <div className=\"hide_me\">\n                                            </div>                            \n                                        <div className=\"pop_up_full_right_no_img\">\n                                            <div className=\"pop_up_full_header\">\n                                                <div className=\"pop_up_full_header_left\">\n                                                    {fullPost[0].author.avatar ? <img src={fullPost[0].author.avatar} alt={fullPost[0].author.avatar}/> :<img src={require('../../assets/images/blank_avatar.png')} alt={\"avatar\"}/>}\n                                                    <div className=\"post_pop_up_name\"> \n                                                        {fullPost[0].author.first_name} {fullPost[0].author.last_name}\n                                                        <TimeAgo date={fullPost[0].posted_date} formatter={formatter} />\n                                                    </div>\n                                                </div>\n                                                <div className=\"post_header_dots\">   \n                                                { fullPost[0].is_from_logged_in_user ?  \n                                            <FeedPostMenu props={props}/>\n                                                :\n                                                <img src={require('../../assets/images/send_button.png')} alt=\"three dots\" id=\"dots\" />\n                                            }\n                                                </div>\n                                            </div>\n                                        <div className=\"pop_up_post_full_content\">\n                                        { props.FeedReducer.editPostMenu ? \n                                      <>\n                                      <textarea name='new_post' type='text' defaultValue={text_content} onChange={(e) => {setContent(e.currentTarget.value)}}></textarea>\n                                        <div className=\"post_edit_buttons\">\n                                        <button type=\"submit\" id=\"submit_edit_post\" onClick={(e) => {sendEditPostHandler(e,props,text_content);editPostHandler()}}>Submit</button>\n                                        <button type=\"submit\" id=\"cancel_edit_post\" onClick={() => editPostHandler()}>Cancel</button>\n                                        </div>\n                                        </>\n                                        : text_content}\n                                        </div>\n                                        <div className=\"pop_up_full_footer_top\">\n                                            <p>{liked_count} {liked_count ===1 ? \"like\" : \"likes\"}</p>\n                                        </div>\n                                        <div className=\"pop_up_full_footer_bottom\">\n                                            <img src={require('../../assets/images/like.png')} alt=\"like\" id={fullPost[0].id} onClick={(e)=>LikePostHandler(e)}/>\n                                            <p>Like</p>\n                                            <img src={require('../../assets/images/share.png')} alt=\"share\"/>   \n                                            <p>Share</p>\n                                        </div>         \n                                    </div>\n                                </div>\n                                </>\n                              }\n                              </>\n        }\n                        </div>\n                    </div>\n                </div>\n               )\n\n            }\n    }\n\nconst mapStateToProps = state => {\n    return {\n        ...state,\n        content: state.content,\n      };\n    };   \n\nexport default connect(mapStateToProps)(FeedFullPost);       "]},"metadata":{},"sourceType":"module"}