{"ast":null,"code":"import{verifytoken}from\"../../types\";export var verifyTokenAction=function verifyTokenAction(content){return{type:verifytoken,payload:content};};var URL=\"https://tracey.propulsion-learn.ch/backend/api/auth/token/verify/\";function verifyTokenFunction(props){var token=props.SignInReducer.token;var headers=new Headers({'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)});var config={method:'POST',headers:headers,body:JSON.stringify({\"token\":token})};fetch(URL,config).then(function(res){return res.json();}).then(function(data){var content=data;if(content.code===\"token_not_valid\"){localStorage.removeItem('token');props.history.push('/signin');}else{props.history.push('/');}});}export default verifyTokenFunction;","map":{"version":3,"sources":["/home/tracey/Desktop/BootCamp/Week7/Day4/day4/frontend/src/store/actions/tokenVerify/index.js"],"names":["verifytoken","verifyTokenAction","content","type","payload","URL","verifyTokenFunction","props","token","SignInReducer","headers","Headers","config","method","body","JSON","stringify","fetch","then","res","json","data","code","localStorage","removeItem","history","push"],"mappings":"AAAA,OAAQA,WAAR,KAA0B,aAA1B,CAEA,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAAC,OAAO,QAAK,CACzCC,IAAI,CAAEH,WADmC,CAEzCI,OAAO,CAAEF,OAFgC,CAAL,EAAjC,CAMP,GAAMG,CAAAA,GAAG,oEAAT,CAGA,QAASC,CAAAA,mBAAT,CAA6BC,KAA7B,CAAmC,CAC/B,GAAMC,CAAAA,KAAK,CAAGD,KAAK,CAACE,aAAN,CAAoBD,KAAlC,CACA,GAAME,CAAAA,OAAO,CAAG,GAAIC,CAAAA,OAAJ,CAAY,CACxB,eAAgB,kBADQ,CAExB,iCAA2BH,KAA3B,CAFwB,CAAZ,CAAhB,CAIA,GAAMI,CAAAA,MAAM,CAAG,CACXC,MAAM,CAAE,MADG,CAEXH,OAAO,CAAPA,OAFW,CAGXI,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAC,QAASR,KAAV,CAAf,CAHK,CAAf,CAOAS,KAAK,CAACZ,GAAD,CAAMO,MAAN,CAAL,CAAoBM,IAApB,CAAyB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAA5B,EACCF,IADD,CACM,SAAAG,IAAI,CAAI,CACV,GAAMnB,CAAAA,OAAO,CAAGmB,IAAhB,CACA,GAAInB,OAAO,CAACoB,IAAR,GAAiB,iBAArB,CAAwC,CACpCC,YAAY,CAACC,UAAb,CAAwB,OAAxB,EACAjB,KAAK,CAACkB,OAAN,CAAcC,IAAd,CAAmB,SAAnB,EACH,CAHD,IAGO,CACHnB,KAAK,CAACkB,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACH,CACJ,CATD,EAUH,CACD,cAAepB,CAAAA,mBAAf","sourcesContent":["import {verifytoken} from \"../../types\";\n\nexport const verifyTokenAction = content => ({\n    type: verifytoken,\n    payload: content\n});\n\n\nconst URL = `https://tracey.propulsion-learn.ch/backend/api/auth/token/verify/`;\n\n\nfunction verifyTokenFunction(props){\n    const token = props.SignInReducer.token\n    const headers = new Headers({\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n    })\n    const config = {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\"token\": token})\n\n    };\n \n    fetch(URL, config) .then(res => res.json())\n    .then(data => {\n        const content = data;\n        if (content.code === \"token_not_valid\") {\n            localStorage.removeItem('token');\n            props.history.push('/signin');\n        } else {\n            props.history.push('/');\n        }\n    })\n}\nexport default verifyTokenFunction;"]},"metadata":{},"sourceType":"module"}